.container {
  width: 100%;
}

.header {
  text-align: center;
  margin-bottom: 2rem;
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--text-primary);
}

.chartGrid {
  display: grid;
  grid-template-columns: 1fr; /* 1 column on small screens */
  gap: 2rem;
  margin-bottom: 2.5rem;
}

/* On medium screens and up, use a 2x2 grid */
@media (min-width: 1024px) {
  .chartGrid {
    grid-template-columns: 1fr 1fr;
  }
}

.chartBox {
  background-color: var(--background-light);
  padding: 1.5rem;
  border-radius: 12px;
  border: 1px solid var(--border-color);
  height: 400px; /* Give charts a fixed height */
}

.chartBox h2 {
  margin-bottom: 1.5rem;
  color: var(--text-secondary);
  font-weight: 600;
  text-align: center;
}

.tableContainer {
  background-color: var(--background-light);
  padding: 2rem;
  border-radius: 12px;
  border: 1px solid var(--border-color);
  overflow-x: auto; /* Allow table to scroll horizontally on small screens */
}

.tableContainer h2 {
  margin-bottom: 1.5rem;
  color: var(--text-secondary);
  font-weight: 600;
}

.table {
  width: 100%;
  border-collapse: collapse;
  min-width: 600px; /* Ensure table has a minimum width */
}

.th {
  padding: 0.75rem 1rem;
  text-align: left;
  background-color: var(--background-card);
  color: var(--text-primary);
  border-bottom: 1px solid var(--border-color);
  font-size: 0.875rem;
  text-transform: uppercase;
}

.td {
  padding: 0.75rem 1rem;
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border-color);
}

.tr:last-child .td {
  border-bottom: none;
}


### **Step 2: Update Your Data Page**

Now, let's add the new chart and table column to your dashboard.

**File:** `app/data/page.js`
**Action:** **Replace the entire contents** of this file. I have added the logic for "IR_Value".

```javascript:Data Page (Dashboard):app/data/page.js
'use client'; // Required for Supabase client-side interaction

import { useState, useEffect } from 'react';
import { supabase } from '../../utils/supabaseClient'; // Note the '../../'
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';
import styles from './page.module.css'; // Import the data page styles

export default function DataPage() {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  // Function to fetch data from Supabase
  const fetchData = async () => {
    try {
      const { data: sensorData, error: fetchError } = await supabase
        .from('sensor_data')
        .select('*')
        .order('id', { ascending: false }) // Order by ID
        .limit(50); // Get the latest 50 entries

      if (fetchError) {
        throw fetchError;
      }
      
      setData(sensorData.reverse());
      setError(null);

    } catch (err) {
      console.error('Error fetching data:', err);
      setError(err.message || 'Failed to fetch data');
    } finally {
      setLoading(false);
    }
  };

  // Fetch data on initial load and set up real-time listener
  useEffect(() => {
    fetchData(); // Initial fetch

    const channel = supabase
      .channel('sensor_data_changes')
      .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'sensor_data' }, (payload) => {
        console.log('New data received:', payload.new);
        setData((currentData) => {
           const newDataPoint = { ...payload.new };
           const updatedData = [...currentData, newDataPoint].slice(-50); 
           return updatedData;
        });
      })
      .subscribe();

    return () => {
      supabase.removeChannel(channel);
    };
  }, []); // Empty dependency array means this runs once on mount

  if (loading) {
    return <div className={styles.container}>Loading sensor data...</div>;
  }
  
  if (error) {
    return <div className={styles.container}>Error: {error}</div>;
  }

  // Prepare data for the chart
   const chartData = data.map(d => ({
    timestamp: d.id, // Use ID as the timestamp
    Weight: parseFloat(d.weight_g) || 0,
    GyroX: parseFloat(d.gyro_x) || 0,
    GyroY: parseFloat(d.gyro_y) || 0,
    GyroZ: parseFloat(d.gyro_z) || 0,
    Temperature: parseFloat(d.temperature_c) || 0,
    IR_Value: parseInt(d.ir_value) || 0 // <-- ADDED IR_VALUE
  }));

  return (
    <div className={styles.container}>
      <h1 className={styles.header}>Real-Time Data Dashboard</h1>

      <div className={styles.chartGrid}>
        
        {/* --- Individual Chart: Weight --- */}
        <div className={styles.chartBox}>
          <h2>Weight Over Time</h2>
          <ResponsiveContainer width="100%" height="90%">
            <LineChart data={chartData}>
              <CartesianGrid strokeDasharray="3 3" stroke="var(--border-color)" />
              <XAxis dataKey="timestamp" stroke="var(--text-secondary)" fontSize="12px" label={{ value: 'Row ID', position: 'insideBottom', dy: 10, fill: 'var(--text-secondary)' }} />
              <YAxis stroke="var(--text-secondary)" fontSize="12px" label={{ value: 'Weight (g)', angle: -90, position: 'insideLeft', fill: 'var(--text-secondary)', dx: 10 }} />
              <Tooltip contentStyle={{ backgroundColor: 'var(--background-dark)', border: '1px solid var(--border-color)' }} itemStyle={{ color: 'var(--text-primary)' }} />
              <Legend />
              <Line type="monotone" dataKey="Weight" stroke="var(--accent-blue)" dot={false} strokeWidth={2} />
            </LineChart>
          </ResponsiveContainer>
        </div>

        {/* --- Chart: Temperature --- */}
        <div className={styles.chartBox}>
          <h2>Temperature Over Time</h2>
          <ResponsiveContainer width="100%" height="90%">
            <LineChart data={chartData}>
              <CartesianGrid strokeDasharray="3 3" stroke="var(--border-color)" />
              <XAxis dataKey="timestamp" stroke="var(--text-secondary)" fontSize="12px" label={{ value: 'Row ID', position: 'insideBottom', dy: 10, fill: 'var(--text-secondary)' }} />
              <YAxis stroke="var(--text-secondary)" fontSize="12px" label={{ value: 'Temp (°C)', angle: -90, position: 'insideLeft', fill: 'var(--text-secondary)', dx: 10 }} />
              <Tooltip contentStyle={{ backgroundColor: 'var(--background-dark)', border: '1px solid var(--border-color)' }} itemStyle={{ color: 'var(--text-primary)' }} />
              <Legend />
              <Line type="monotone" dataKey="Temperature" stroke="var(--accent-red)" dot={false} strokeWidth={2} />
            </LineChart>
          </ResponsiveContainer>
        </div>

        {/* --- Individual Chart: Gyroscope --- */}
        <div className={styles.chartBox}>
          <h2>Gyroscope Over Time</h2>
          <ResponsiveContainer width="100%" height="90%">
            <LineChart data={chartData}>
              <CartesianGrid strokeDasharray="3 3" stroke="var(--border-color)" />
              <XAxis dataKey="timestamp" stroke="var(--text-secondary)" fontSize="12px" label={{ value: 'Row ID', position: 'insideBottom', dy: 10, fill: 'var(--text-secondary)' }}/>
              <YAxis stroke="var(--text-secondary)" fontSize="12px" label={{ value: 'Gyro (°/s)', angle: -90, position: 'insideLeft', fill: 'var(--text-secondary)', dx: 10 }} />
              <Tooltip contentStyle={{ backgroundColor: 'var(--background-dark)', border: '1px solid var(--border-color)' }} itemStyle={{ color: 'var(--text-primary)' }} />
              <Legend />
              <Line type="monotone" dataKey="GyroX" stroke="var(--accent-green)" dot={false} strokeWidth={2} />
              <Line type="monotone" dataKey="GyroY" stroke="var(--accent-yellow)" dot={false} strokeWidth={2} />
              <Line type="monotone" dataKey="GyroZ" stroke="#ff7300" dot={false} strokeWidth={2} />
            </LineChart>
          </ResponsiveContainer>
        </div>

        {/* --- NEW CHART: IR Value --- */}
        <div className={styles.chartBox}>
          <h2>IR Value Over Time (Finger Presence)</h2>
          <ResponsiveContainer width="100%" height="90%">
            <LineChart data={chartData}>
              <CartesianGrid strokeDasharray="3 3" stroke="var(--border-color)" />
              <XAxis dataKey="timestamp" stroke="var(--text-secondary)" fontSize="12px" label={{ value: 'Row ID', position: 'insideBottom', dy: 10, fill: 'var(--text-secondary)' }} />
              <YAxis stroke="var(--text-secondary)" fontSize="12px" label={{ value: 'IR Raw Value', angle: -90, position: 'insideLeft', fill: 'var(--text-secondary)', dx: 10 }} />
              <Tooltip contentStyle={{ backgroundColor: 'var(--background-dark)', border: '1px solid var(--border-color)' }} itemStyle={{ color: 'var(--text-primary)' }} />
              <Legend />
              <Line type="monotone" dataKey="IR_Value" name="IR Value" stroke="#E882D8" dot={false} strokeWidth={2} />
            </LineChart>
          </ResponsiveContainer>
        </div>

      </div>

      {/* --- Data Table --- */}
      {data.length > 0 ? (
        <div className={styles.tableContainer}>
          <h2>Recent Readings</h2>
          <table className={styles.table}>
            <thead>
              <tr className={styles.tr}>
                <th className={styles.th}>ID</th>
                <th className={styles.th}>Weight (g)</th>
                <th className={styles.th}>Temp (°C)</th>
                <th className={styles.th}>Gyro X</th>
                <th className={styles.th}>Gyro Y</th>
                <th className={styles.th}>Gyro Z</th>
                <th className={styles.th}>IR Value</th> {/* <-- ADDED HEADER */}
              </tr>
            </thead>
            <tbody>
              {data.slice().reverse().slice(0, 10).map((row) => ( // Show latest 10, newest first
                <tr key={row.id} className={styles.tr}>
                  <td className={styles.td}>{row.id}</td>
                  <td className={styles.td}>{row.weight_g?.toFixed(1)}</td>
                  <td className={styles.td}>{row.temperature_c?.toFixed(1)}</td>
                  <td className={styles.td}>{row.gyro_x?.toFixed(1)}</td>
                  <td className={styles.td}>{row.gyro_y?.toFixed(1)}</td>
                  <td className={styles.td}>{row.gyro_z?.toFixed(1)}</td>
                  <td className={styles.td}>{row.ir_value}</td> {/* <-- ADDED DATA */}
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      ) : (
         <p style={{textAlign: 'center', fontSize: '1.2rem', color: 'var(--text-secondary)'}}>No sensor data yet. Make sure your ESP8266 is running and sending data.</p>
      )}
    </div>
  );
}
